<template>
    <v-app>
        <vue-progress-bar></vue-progress-bar>
        <v-app-bar app clipped-left color="primary">
            <v-app-bar-nav-icon @click="drawer = !drawer"></v-app-bar-nav-icon>
            <img alt="Logo" class="shrink hidden-sm-and-down logo ml-3 mr-3" src="../../static/img/logo.svg" />
            <span class="title ml-3 mr-3 d-none d-lg-block">{{ $config.application }}</span>

            <v-spacer></v-spacer>
            <v-btn v-if="!$store.getters.authed" text light @click="$router.push({ name: 'auth', params: { method: 'redirect' } })">Login</v-btn>
            <v-btn v-if="$store.getters.authed" text light @click="$router.push({ name: 'auth', params: { method: 'logout' } })">Logout</v-btn>
        </v-app-bar>

        <v-main>
            <v-container fluid fill-height class="grey lighten-4 d-flex flex-column align-stretch justify-start pa-0">
                <v-overlay :value="$store.getters.loading" absolute><v-progress-circular indeterminate size="64"></v-progress-circular></v-overlay>
                <router-view v-show="!$store.getters.loading"></router-view>
            </v-container>
        </v-main>

        <v-footer app inset>
            <div class="flex-grow-1"></div>
            <div class="grey--text"><footer-metadata></footer-metadata></div>
        </v-footer>
    </v-app>
</template>

<script>
import footerMetadata from '~/components/core/footer-metadata'

export default {
    name: 'default-layout',
    components: { footerMetadata },
    data: function() { return {
        drawer: true,
    }},
};
</script>

<style scoped>
.v-footer {
    padding: 0 8px;
    font-size: 14px;
}
.logo {
    max-height: 30px;
}
</style>
